<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Painel T√°tico UMBRA</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        /* Scrollbar customizada */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #09090b; }
        ::-webkit-scrollbar-thumb { background: #27272a; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #3f3f46; }

        .animate-fadeIn { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Welcome Screen Animations */
        .welcome-fade-out { animation: fadeOut 0.5s ease-out forwards; }
        @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Canvas cursor */
        canvas { cursor: crosshair; touch-action: none; }
        
        /* Mobile Safe Area for Bottom Nav */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }

        /* Ajuste para inputs num√©ricos */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body class="bg-black text-zinc-300 selection:bg-purple-900 selection:text-white min-h-screen flex flex-col pb-24 md:pb-0 overflow-hidden" id="main-body">

    <!-- WELCOME SCREEN -->
    <div id="welcome-screen" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center p-6 text-center transition-all duration-500">
        <div class="mb-8 relative">
            <div class="absolute inset-0 bg-purple-600 blur-3xl opacity-20 rounded-full animate-pulse"></div>
            <div class="bg-white text-black p-6 rounded-full shadow-[0_0_40px_rgba(255,255,255,0.15)] relative z-10">
                <i data-lucide="umbrella" class="w-16 h-16 md:w-24 md:h-24" stroke-width="2"></i>
            </div>
        </div>
        
        <h1 class="text-4xl md:text-6xl font-black tracking-[0.2em] text-white leading-tight mb-4 animate-fadeIn">
            UMBRA
        </h1>
        
        <p class="text-xs md:text-sm text-zinc-500 uppercase tracking-[0.2em] mb-12 max-w-lg leading-relaxed animate-fadeIn" style="animation-delay: 0.2s">
            Conquistar n√£o √© vencer o mundo ‚Äî √© dominar a si mesmo enquanto caminha por ele.
        </p>

        <button onclick="enterSite()" class="group relative px-8 py-4 bg-white text-black font-black text-sm uppercase tracking-widest rounded hover:bg-zinc-200 transition-all active:scale-95 animate-fadeIn" style="animation-delay: 0.4s">
            <span class="relative z-10 flex items-center gap-2">
                Acessar Painel <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
            </span>
            <div class="absolute inset-0 bg-purple-500 blur-xl opacity-0 group-hover:opacity-30 transition-opacity"></div>
        </button>

        <div class="absolute bottom-8 text-[10px] text-zinc-700 uppercase tracking-widest animate-fadeIn" style="animation-delay: 0.6s">
            Protocolo S38 Iniciado
        </div>
    </div>

    <!-- HEADER (Desktop & Mobile Top) -->
    <header class="border-b border-zinc-800 p-4 sticky top-0 z-40 bg-black/95 backdrop-blur-sm shadow-xl">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-3 w-full md:w-auto justify-center md:justify-start">
                <div class="bg-white text-black p-2 rounded-full shadow-[0_0_15px_rgba(255,255,255,0.2)]">
                    <i data-lucide="umbrella" class="w-6 h-6" stroke-width="2.5"></i>
                </div>
                <div class="text-center md:text-left">
                    <h1 class="text-2xl md:text-3xl font-black tracking-[0.2em] text-white leading-none">UMBRA</h1>
                    <p class="text-[9px] md:text-[10px] text-zinc-500 uppercase tracking-widest mt-0.5">We only see each other at weddings and funerals.</p>
                </div>
            </div>
            
            <!-- Desktop Nav (Hidden on Mobile) -->
            <nav class="hidden md:flex gap-2 bg-zinc-900/50 p-1.5 rounded-xl border border-zinc-800">
                <button onclick="switchTab('squad')" id="desk-tab-squad" class="nav-btn px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-widest transition-all flex items-center gap-2 bg-white text-black shadow-lg scale-105">
                    <i data-lucide="users" class="w-3.5 h-3.5"></i> Squad
                </button>
                <button onclick="switchTab('sensi')" id="desk-tab-sensi" class="nav-btn px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-widest transition-all flex items-center gap-2 text-zinc-500 hover:text-white hover:bg-zinc-800">
                    <i data-lucide="sliders-horizontal" class="w-3.5 h-3.5"></i> Sensi
                </button>
                <button onclick="switchTab('map')" id="desk-tab-map" class="nav-btn px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-widest transition-all flex items-center gap-2 text-zinc-500 hover:text-white hover:bg-zinc-800">
                    <i data-lucide="globe" class="w-3.5 h-3.5"></i> Mapa
                </button>
                <button onclick="switchTab('training')" id="desk-tab-training" class="nav-btn px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-widest transition-all flex items-center gap-2 text-zinc-500 hover:text-white hover:bg-zinc-800">
                    <i data-lucide="calendar" class="w-3.5 h-3.5"></i> Treino
                </button>
                <button onclick="switchTab('4x4')" id="desk-tab-4x4" class="nav-btn px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-widest transition-all flex items-center gap-2 text-zinc-500 hover:text-white hover:bg-zinc-800">
                    <i data-lucide="swords" class="w-3.5 h-3.5"></i> Apostado
                </button>
            </nav>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main id="app-content" class="max-w-6xl mx-auto p-4 w-full flex-grow">
        <!-- Content injected via JS -->
    </main>

    <!-- MOBILE BOTTOM NAV (Visible only on Mobile) -->
    <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-black/95 border-t border-zinc-800 p-2 pb-safe z-50 flex justify-between items-center backdrop-blur-md px-4">
        <button onclick="switchTab('squad')" id="mob-tab-squad" class="mob-nav-btn flex flex-col items-center gap-1 p-2 text-white">
            <i data-lucide="users" class="w-5 h-5"></i>
            <span class="text-[9px] font-bold uppercase tracking-wide">Squad</span>
        </button>
        <button onclick="switchTab('sensi')" id="mob-tab-sensi" class="mob-nav-btn flex flex-col items-center gap-1 p-2 text-zinc-500">
            <i data-lucide="sliders-horizontal" class="w-5 h-5"></i>
            <span class="text-[9px] font-bold uppercase tracking-wide">Sensi</span>
        </button>
        <button onclick="switchTab('map')" id="mob-tab-map" class="mob-nav-btn flex flex-col items-center gap-1 p-2 text-zinc-500">
            <i data-lucide="globe" class="w-5 h-5"></i>
            <span class="text-[9px] font-bold uppercase tracking-wide">Mapa</span>
        </button>
        <button onclick="switchTab('training')" id="mob-tab-training" class="mob-nav-btn flex flex-col items-center gap-1 p-2 text-zinc-500">
            <i data-lucide="calendar" class="w-5 h-5"></i>
            <span class="text-[9px] font-bold uppercase tracking-wide">Treino</span>
        </button>
        <button onclick="switchTab('4x4')" id="mob-tab-4x4" class="mob-nav-btn flex flex-col items-center gap-1 p-2 text-zinc-500">
            <i data-lucide="swords" class="w-5 h-5"></i>
            <span class="text-[9px] font-bold uppercase tracking-wide">4x4</span>
        </button>
    </nav>

    <!-- DRAWING MODAL (LIGHTBOX) -->
    <div id="image-modal" class="fixed inset-0 z-[60] bg-black/95 hidden flex flex-col items-center justify-center p-0 md:p-4 backdrop-blur-md touch-none">
        <!-- Toolbar -->
        <div class="absolute top-4 left-4 right-4 flex justify-between items-center bg-zinc-900/90 p-3 rounded-xl border border-zinc-800 z-50 shadow-2xl">
            <div class="flex items-center gap-2">
                <i data-lucide="pencil" class="text-purple-500 w-4 h-4"></i>
                <span class="text-xs font-bold text-white uppercase">Modo T√°tico</span>
            </div>
            <div class="flex gap-2">
                <button onclick="clearCanvas()" class="p-2 rounded bg-red-900/20 text-red-500 hover:bg-red-900/40 transition-colors" title="Limpar Rota">
                    <i data-lucide="trash-2" class="w-5 h-5"></i>
                </button>
                <button onclick="closeModal()" class="p-2 rounded bg-zinc-800 text-white hover:bg-zinc-700 transition-colors" title="Fechar">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
        </div>

        <!-- Canvas Container -->
        <div class="relative w-full h-full md:max-w-6xl md:max-h-[85vh] flex items-center justify-center bg-zinc-900 overflow-hidden md:rounded-lg md:border border-zinc-800" id="canvas-container">
            <img id="modal-img" src="" class="absolute inset-0 w-full h-full object-contain pointer-events-none select-none opacity-80" alt="Mapa Base">
            <canvas id="tactical-canvas" class="absolute inset-0 w-full h-full touch-none"></canvas>
        </div>
        
        <div class="absolute bottom-6 bg-black/60 px-4 py-2 rounded-full backdrop-blur-sm text-zinc-400 text-[10px] uppercase tracking-widest flex items-center gap-2 pointer-events-none">
            <i data-lucide="mouse-pointer-2" class="w-3 h-3"></i> Arraste para desenhar
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // === GLOBAL DATA ===
        const guildInfo = { season: 'Meta 2026 | Season 38' };

        const mapsData = {
            bermuda: {
                title: 'Bermuda',
                image: 'https://i.imgur.com/K207PXG.jpeg',
                locations: [
                    { id: 'b1', name: 'Clock Tower', risk: 'Extremo', loot: 'S', desc: 'O rel√≥gio conta o tempo de vida. Domine a torre ou morra na escada.' },
                    { id: 'b2', name: 'Factory', risk: 'Extremo', loot: 'A', desc: 'Luta corporal no teto, tiroteio no ch√£o. O caos industrial.' },
                    { id: 'b3', name: 'Peak', risk: 'Muito Alto', loot: 'B', desc: 'O topo do mundo. Vis√≠vel de todos os lados, prote√ß√£o zero.' },
                    { id: 'b8', name: 'Observatory', risk: 'Alto', loot: 'SS', desc: 'O melhor loot do mapa. Se voc√™ sair vivo, sai armado at√© os dentes.', sniper: true },
                    { id: 'b7', name: 'Sentosa', risk: 'Baixo', loot: 'SS', desc: 'A ilha do ex√≠lio. Loot para todos, mas a ponte √© uma armadilha mortal.', sniper: true },
                    { id: 'b6', name: 'Mars Electric', risk: 'Baixo', loot: 'S', desc: 'Vasto e silencioso. Perfeito para lootear e rotacionar com ve√≠culos.' },
                    { id: 'b4', name: 'Pochinok', risk: 'M√©dio', loot: 'A', desc: 'Combate casa a casa. Requer coordena√ß√£o do squad.' },
                    { id: 'b5', name: 'Bimasakti Strip', risk: 'Alto', loot: 'B', desc: 'Zona de passagem perigosa. Corredor da morte.' },
                    { id: 'b9', name: 'Graveyard', risk: 'M√©dio', loot: 'A', desc: 'Cemit√©rio. Bom loot nas mans√µes e igreja.' },
                    { id: 'b10', name: 'Bullseye', risk: 'Baixo', loot: 'B', desc: 'Estande de tiro. Aberto e com pouco cover.' },
                    { id: 'b11', name: 'Shipyard', risk: 'Alto', loot: 'A', desc: 'Estaleiro. Muitos cont√™ineres e guindastes. Verticalidade.' },
                    { id: 'b12', name: 'Plantation', risk: 'Baixo', loot: 'B', desc: 'Planta√ß√£o. √Årea aberta, perigosa sem gelo.' },
                    { id: 'b13', name: 'Katulistiwa', risk: 'M√©dio', loot: 'B', desc: 'Ponto de passagem. Loot razo√°vel, mas exposto.' },
                    { id: 'b14', name: 'Rim Nam Village', risk: 'Baixo', loot: 'A', desc: 'Vilas flutuantes. Bom para rota√ß√£o furtiva.' },
                    { id: 'b15', name: 'Hangar', risk: 'Alto', loot: 'A', desc: 'Guerra de cont√™ineres. Cuidado com o high ground do Observat√≥rio.' },
                    { id: 'b16', name: 'Kota Tua', risk: 'Baixo', loot: 'C', desc: 'Pequena vila ao sul. Loot fraco, apenas passagem.' },
                    { id: 'b17', name: 'Cape Town', risk: 'M√©dio', loot: 'A', desc: 'Cidade costeira. Combate urbano intenso em ruas estreitas.' },
                    { id: 'b18', name: 'Keraton', risk: 'Baixo', loot: 'C', desc: 'Pequeno condom√≠nio. Bom para segurar posi√ß√£o, ruim de loot.' },
                    { id: 'b19', name: 'Mill', risk: 'Alto', loot: 'A', desc: 'Rei da Colina. Vantagem absurda de altura.' },
                    { id: 'b20', name: 'Riverside', risk: 'Baixo', loot: 'C', desc: 'Casas na beira do rio. Rota√ß√£o alternativa.' }
                ]
            },
            purgatorio: {
                title: 'Purgat√≥rio',
                image: 'https://i.imgur.com/gXKUKyB.jpeg',
                locations: [
                    { id: 'p1', name: 'Brasilia', risk: 'Extremo', loot: 'SS', desc: 'O inferno na terra. Tirolesas cruzadas e combate vertical.' },
                    { id: 'p2', name: 'Central', risk: 'Alto', loot: 'A', desc: 'Casas de 3 andares. Ponto central de rota√ß√£o.' },
                    { id: 'p3', name: 'Marbleworks', risk: 'Alto', loot: 'A', desc: 'Labirinto de guindastes. Snipers dominam o topo.' },
                    { id: 'p4', name: 'Golf Course', risk: 'M√©dio', loot: 'B', desc: 'Campo aberto. Perigoso atravessar a p√©.' },
                    { id: 'p5', name: 'Moathouse', risk: 'M√©dio', loot: 'SS', desc: 'A mans√£o isolada. Spawn quase garantido de M82B.', sniper: true },
                    { id: 'p6', name: 'Lumber Mill', risk: 'Baixo', loot: 'B', desc: 'Serraria. Rota√ß√£o longa, mas segura.' },
                    { id: 'p7', name: 'Fire Brigade', risk: 'M√©dio', loot: 'B', desc: 'Corpo de bombeiros. Loot r√°pido e rota√ß√£o para Central.' },
                    { id: 'p8', name: 'Forge', risk: 'Baixo', loot: 'B', desc: '√Årea industrial leste. Tranquila para loot inicial.' },
                    { id: 'p9', name: 'Ski Lodge', risk: 'M√©dio', loot: 'A', desc: 'Pista de gelo. Rota√ß√£o r√°pida com ve√≠culos.' },
                    { id: 'p10', name: 'Campsite', risk: 'Baixo', loot: 'C', desc: 'Pequeno acampamento. Apenas passagem.' },
                    { id: 'p11', name: 'Fields', risk: 'Alto', loot: 'C', desc: 'Campos abertos. √Årea de morte entre Brasilia e Marbleworks.' },
                    { id: 'p12', name: 'Crossroads', risk: 'Baixo', loot: 'C', desc: 'Posto avan√ßado isolado. Loot fraco.' },
                    { id: 'p13', name: 'Quarry', risk: 'Baixo', loot: 'B', desc: 'Pedreira. Cuidado com quem est√° em cima.' },
                    { id: 'p14', name: 'Mt. Villa', risk: 'Baixo', loot: 'C', desc: 'Vilas no topo da montanha. Vis√£o boa, loot ruim.' }
                ]
            },
            kalahari: {
                title: 'Kalahari',
                image: 'https://i.imgur.com/5ZCbi57.jpeg',
                locations: [
                    { id: 'k1', name: 'Refinery', risk: 'Extremo', loot: 'SS', desc: 'Plataformas altas. Quem domina o topo controla o jogo.', sniper: true },
                    { id: 'k2', name: 'Command Post', risk: 'Alto', loot: 'S', desc: 'Corredores estreitos e tendas. Troca√ß√£o de perto (SMG).' },
                    { id: 'k3', name: 'The Sub', risk: 'Alto', loot: 'A', desc: 'Submarino no deserto. Cair em cima √© vantagem, embaixo √© morte.', sniper: true },
                    { id: 'k4', name: 'Bayfront', risk: 'M√©dio', loot: 'A', desc: 'Cidade densa. √ìtimo para flanquear e pegar costas.' },
                    { id: 'k5', name: 'Santa Catarina', risk: 'M√©dio', loot: 'B', desc: 'O navio encalhado. Bom loot interno, mas cuidado com granadas.' },
                    { id: 'k6', name: 'Stone Ridge', risk: 'Alto', loot: 'A', desc: 'Pedreira. High Ground poderoso para snipers contra Command Post.', sniper: true },
                    { id: 'k7', name: 'Mammoth', risk: 'Baixo', loot: 'B', desc: 'Esqueleto gigante. Rota√ß√£o segura pelas bordas.' },
                    { id: 'k8', name: 'Shrines', risk: 'Baixo', loot: 'B', desc: 'Templos antigos. Loot espalhado, bom para in√≠cio tranquilo.' },
                    { id: 'k9', name: 'Council Hall', risk: 'M√©dio', loot: 'A', desc: 'Pr√©dio fechado. Shotgun reina nos corredores.' },
                    { id: 'k10', name: 'Foundation', risk: 'Baixo', loot: 'B', desc: 'Ru√≠nas baixas. Ruim de vis√£o, use apenas para passagem.' },
                    { id: 'k11', name: 'Old Hampton', risk: 'Baixo', loot: 'C', desc: 'Ru√≠nas isoladas no norte. Quase ningu√©m cai aqui.' },
                    { id: 'k12', name: 'Confinement', risk: 'Baixo', loot: 'C', desc: 'A pris√£o. Rota√ß√£o terr√≠vel, evite se poss√≠vel.' },
                    { id: 'k13', name: 'The Maze', risk: 'M√©dio', loot: 'B', desc: 'Labirinto de ru√≠nas. F√°cil se perder e tomar costas.' }
                ]
            },
            nexterra: {
                title: 'Nova Terra',
                image: 'https://i.imgur.com/DAdWFdu.jpeg',
                locations: [
                    { id: 'n1', name: 'Intellect Center', risk: 'Extremo', loot: 'SS', desc: 'Ilhas flutuantes. Loot tecnol√≥gico n√≠vel 3. Caos total.' },
                    { id: 'n2', name: 'Grav Labs', risk: 'Alto', loot: 'S', desc: 'Zona de gravidade zero. Pulos altos permitem tiros a√©reos (trickshots).', sniper: true },
                    { id: 'n3', name: 'Deca Square', risk: 'M√©dio', loot: 'A', desc: '√Årea comercial. Muitos obst√°culos e portais de teletransporte.' },
                    { id: 'n4', name: 'Museum', risk: 'Baixo', loot: 'A', desc: 'Combate interno. Vidros quebram e revelam sua posi√ß√£o.' },
                    { id: 'n5', name: 'Plazaria', risk: 'Alto', loot: 'S', desc: 'Pra√ßa de alimenta√ß√£o gigante. Troca√ß√£o fren√©tica e muito loot.' },
                    { id: 'n6', name: 'Mud Site', risk: 'Baixo', loot: 'B', desc: 'Obras no mangue. Paredes quebr√°veis. Bom para camperar.' },
                    { id: 'n7', name: 'Farmtopia', risk: 'M√©dio', loot: 'A', desc: 'Fazenda futurista. Aberto no centro, loot nas bordas.', sniper: true },
                    { id: 'n8', name: 'Rust Town', risk: 'M√©dio', loot: 'B', desc: 'Favela enferrujada. Muitos pixels e frestas para atirar.' },
                    { id: 'n9', name: 'Zipway', risk: 'M√©dio', loot: 'A', desc: 'Industrial. Muitos canos e tirolesas para rota√ß√£o r√°pida.' },
                    { id: 'n10', name: 'Twin Bridge', risk: 'Baixo', loot: 'C', desc: 'Duas pontes. Ponto de estrangulamento de rota√ß√£o.' },
                    { id: 'n11', name: 'Mortar Ruins', risk: 'Baixo', loot: 'C', desc: 'Ru√≠nas de concreto. Prote√ß√£o s√≥lida, mas pouco loot.' },
                    { id: 'n12', name: 'Turbine', risk: 'Baixo', loot: 'B', desc: 'Turbinas e√≥licas. Espa√ßo aberto, cuidado com snipers.' }
                ]
            }
        };

        const squadRoles = [
            { 
                role: 'O Rusher (Entry)', desc: 'Entra no pixel e sai antes de tomar dano.', 
                active: 'Tatsuya', color: 'border-red-600', icon: 'flame', iconColor: 'text-red-600',
                meta: 'Speed Burst', pet: 'Rockie', petDesc: 'Cooldown Reduzido',
                pri: 'MP40', sec: 'M1887 (Baubau)', side: 'UZI', obs: 'Foco: Cad√™ncia insana.',
                passives: ['Luna', 'Kelly', 'Hayato']
            },
            { 
                role: 'O Bloqueador (Nero)', desc: 'Impede o inimigo de usar Gelo.', 
                active: 'Nero', color: 'border-orange-500', icon: 'ghost', iconColor: 'text-orange-500',
                meta: 'Anti-Gelo', pet: 'Drakinho', petDesc: 'Info de cura',
                pri: 'Bizon', sec: 'M1014-III', side: 'M1873', obs: 'Foco: Spam agressivo.',
                passives: ['Moco', 'Alvaro', 'Nairi']
            },
            { 
                role: 'O Sniper (Lila)', desc: 'Aplica lentid√£o. Controle de √°rea.', 
                active: 'Iris / Skyler', color: 'border-purple-500', icon: 'crosshair', iconColor: 'text-purple-500',
                meta: 'Slow Motion', pet: 'Falc√£o', petDesc: 'Queda R√°pida',
                pri: 'M82B (Barret)', sec: 'AC80 / Woodpecker', side: 'Desert Eagle', obs: 'Lila comba com Rifles.',
                passives: ['Lila', 'Rafael', 'Maro']
            },
            { 
                role: 'O Suporte (Kassie)', desc: 'Cura infinita no Rusher.', 
                active: 'Kassie', color: 'border-blue-500', icon: 'activity', iconColor: 'text-blue-500',
                meta: 'Infinite HP', pet: 'Dom Pisante', petDesc: 'Gelo Infinito',
                pri: 'M4A1-Z (Chip 3)', sec: 'Charge Buster', side: 'FGL-24', obs: 'Lan√ßa expulsa do cover.',
                passives: ['Thiva', 'Olivia', 'Kapella']
            }
        ];

        const weeklySchedule = [
            {
                period: "SEGUNDA A QUINTA",
                title: "Rankeada & X-Treino (Grind)",
                desc: "Foco total em subir patente, pegar entrosamento e treinar a comunica√ß√£o. Jogue s√©rio, mas use para testar limites.",
                highlight: false
            },
            {
                period: "SEXTA E S√ÅBADO (16:00 - 22:00)",
                title: "üèÜ TORNEIO DE GUILDA",
                desc: "Compromisso obrigat√≥rio. Foco absoluto no torneio da guilda. Sem testes, apenas o meta definido. Comunique-se, jogue pela vit√≥ria.",
                highlight: true
            },
            {
                period: "DOMINGO",
                title: "Descanso / Livre",
                desc: "Recupera√ß√£o mental ou gameplay casual para manter a mec√¢nica em dia sem press√£o.",
                highlight: false
            }
        ];

        const tacticalTips = [
            { title: 'Rota√ß√£o de Zona', desc: 'O objetivo n√£o √© matar, √© pegar o centro da safe e prever o fechamento (Zona 3 e 4). L√≠der passa a call de rota√ß√£o veicular.' },
            { title: 'Focus Fire', desc: 'Comunica√ß√£o √© chave. O IGL marca o alvo e TODOS atiram juntos. Derrubou um? Rusha com vantagem num√©rica.' },
            { title: 'Gest√£o de Recursos', desc: 'Otimizar tempo de loot. Partilha de recursos (gelo, kits) e economia de fichas para reviver ou fortalecer armas.' },
            { title: 'T√°ticas de End Game', desc: 'Posicionamento high ground vs low ground no final da partida. Uso inteligente de granadas para expulsar inimigos.' },
            { title: 'An√°lise T√°tica (VOD)', desc: 'Rever os clipes das mortes. Identificar quem ficou para tr√°s na rota√ß√£o ou quem atirou sem cover. Ajuste fino de posicionamento.' }
        ];

        const hudCodes = {
            2: [
                '#FFHUDT6O3jSwDdQhPo7eO',
                '#FFHUDT6O3jSwDdQhPo7eP',
                '#FFHUDT6O3jSwDdQhPo7eM',
                '#FFHUDT6O3jSwfzrtPo7eO',
                '#FFHUDT6O3jSwfzrtPo7eP',
                '#FFHUDT6O3jSwfzrtPo7eM'
            ],
            3: [
                '#FFHUDT6O3ji3el9Po7eO',
                '#FFHUDT6O3jizfoydPo7eP'
            ],
            4: [
                '#FFHUDT6O3jQ0OM6NPo7eO',
                '#FFHUDT6O3jQ0OM6NPo7eP',
                '#FFHUDT6O3jQ0OM6NPo7eM (Freestyle)'
            ]
        };
        
        const dnsList = [
            { name: 'Cloudflare', p: '1.1.1.1', s: '1.0.0.1', color: 'text-orange-500' },
            { name: 'Google', p: '8.8.8.8', s: '8.8.4.4', color: 'text-green-500' },
            { name: 'Quad9', p: '9.9.9.9', s: '149.112.112.112', color: 'text-blue-500' },
            { name: 'Cisco (OpenDNS)', p: '208.67.222.222', s: '208.67.220.220', color: 'text-cyan-500' }
        ];

        // === ESTADO ===
        let currentTab = 'squad';
        let currentMapKey = 'bermuda';
        let selectedLocationId = null;
        let currentSensiMode = 'random'; 
        let currentBtnMode = 'random'; 
        let currentHudTab = '3'; 

        let currentSensiValues = {
            geral: 100,
            redDot: 100,
            x2: 100,
            x4: 100,
            awm: 100
        };

        // Canvas State
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        let ctx = null;

        // === FUN√á√ïES DE UI ===
        function enterSite() {
            const welcome = document.getElementById('welcome-screen');
            welcome.classList.add('welcome-fade-out');
            document.body.classList.remove('overflow-hidden'); 
            
            setTimeout(() => {
                welcome.style.display = 'none';
            }, 500);
        }

        function switchTab(tab) {
            currentTab = tab;
            
            // DESKTOP
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.className = 'nav-btn px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-widest transition-all flex items-center gap-2 text-zinc-500 hover:text-white hover:bg-zinc-800';
            });
            const deskBtn = document.getElementById(`desk-tab-${tab}`);
            if(deskBtn) deskBtn.className = 'nav-btn px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-widest transition-all flex items-center gap-2 bg-white text-black shadow-lg scale-105';

            // MOBILE
            document.querySelectorAll('.mob-nav-btn').forEach(btn => {
                btn.classList.remove('text-white', 'text-purple-500');
                btn.classList.add('text-zinc-500');
            });
            const mobBtn = document.getElementById(`mob-tab-${tab}`);
            if(mobBtn) {
                mobBtn.classList.remove('text-zinc-500');
                mobBtn.classList.add('text-white');
            }

            renderContent();
        }

        function switchMap(mapKey) {
            currentMapKey = mapKey;
            selectedLocationId = null;
            renderContent();
        }

        function toggleLocation(id) {
            selectedLocationId = selectedLocationId === id ? null : id;
            renderContent();
        }

        function setSensiMode(mode) {
            currentSensiMode = mode;
            updateSensiUI();
        }

        function setBtnMode(mode) {
            currentBtnMode = mode;
            updateSensiUI();
        }

        function switchHudTab(fingers) {
            currentHudTab = fingers;
            renderHudList();
        }

        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast();
                }).catch(err => {
                    console.error('Erro ao copiar: ', err);
                    fallbackCopy(text);
                });
            } else {
                fallbackCopy(text);
            }
        }

        function fallbackCopy(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand('copy');
                showToast();
            } catch (err) {
                console.error('Fallback: Erro ao copiar', err);
            }
            document.body.removeChild(textArea);
        }

        function showToast() {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-24 left-1/2 -translate-x-1/2 bg-white text-black font-bold px-4 py-2 rounded-lg shadow-lg z-[100] animate-fadeIn text-xs uppercase tracking-widest';
            toast.innerText = 'C√ìDIGO COPIADO!';
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.remove();
            }, 2000);
        }

        function updateSensiUI() {
            const modes = ['random', 'high', 'mid', 'low'];
            modes.forEach(m => {
                const btn = document.getElementById(`btn-mode-${m}`);
                if(btn) {
                    if (currentSensiMode === m) {
                        btn.className = 'bg-purple-600 text-white border-purple-500 py-2 px-4 rounded-lg text-xs font-bold uppercase transition-all border flex flex-col items-center gap-1';
                    } else {
                        btn.className = 'bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white py-2 px-4 rounded-lg text-xs font-bold uppercase transition-all border flex flex-col items-center gap-1';
                    }
                }
            });

            const btnModes = ['random', 'small', 'medium', 'large'];
            btnModes.forEach(m => {
                const btn = document.getElementById(`btn-fire-${m}`);
                if(btn) {
                    if (currentBtnMode === m) {
                        btn.className = 'bg-blue-600 text-white border-blue-500 py-1.5 px-3 rounded text-[10px] font-bold uppercase transition-all border';
                    } else {
                        btn.className = 'bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white py-1.5 px-3 rounded text-[10px] font-bold uppercase transition-all border';
                    }
                }
            });
        }

        function adjustSensi(type, amount) {
            currentSensiValues[type] = Math.min(200, Math.max(0, currentSensiValues[type] + amount));
            document.getElementById(`val-${type}`).innerText = currentSensiValues[type];
            document.getElementById(`bar-${type}`).style.width = `${(currentSensiValues[type] / 200) * 100}%`;
        }

        function openModal(src) {
            if (!src) return;
            const modal = document.getElementById('image-modal');
            const img = document.getElementById('modal-img');
            const canvas = document.getElementById('tactical-canvas');
            
            img.src = src;
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; 
            
            setTimeout(() => {
                const container = document.getElementById('canvas-container');
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
                
                ctx = canvas.getContext('2d');
                ctx.strokeStyle = '#a855f7'; 
                ctx.lineWidth = 4;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                
                addCanvasListeners(canvas);
            }, 100);
        }

        function closeModal() {
            document.getElementById('image-modal').classList.add('hidden');
            document.body.style.overflow = ''; 
            clearCanvas();
        }

        function clearCanvas() {
            const canvas = document.getElementById('tactical-canvas');
            const context = canvas.getContext('2d');
            context.clearRect(0, 0, canvas.width, canvas.height);
        }

        function addCanvasListeners(canvas) {
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault(); 
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                lastX = touch.clientX - rect.left;
                lastY = touch.clientY - rect.top;
                isDrawing = true;
            }, { passive: false });

            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                if (!isDrawing) return;
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                lastX = x;
                lastY = y;
            }, { passive: false });

            canvas.addEventListener('touchend', stopDrawing);
        }

        function startDrawing(e) {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }

        function draw(e) {
            if (!isDrawing) return;
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }

        function stopDrawing() {
            isDrawing = false;
        }

        // === RENDERIZA√á√ÉO ===
        function renderContent() {
            const container = document.getElementById('app-content');
            container.innerHTML = ''; 

            if (currentTab === 'squad') {
                renderSquad(container);
            } else if (currentTab === 'map') {
                renderMap(container);
            } else if (currentTab === 'training') {
                renderTraining(container);
            } else if (currentTab === 'sensi') {
                renderSensi(container);
            } else if (currentTab === '4x4') {
                render4x4(container);
            }
            
            lucide.createIcons(); 
        }

        function renderSquad(container) {
            const banner = `
                <div class="rounded-2xl border border-zinc-800 bg-gradient-to-r from-zinc-900 to-black p-6 flex flex-col md:flex-row items-center justify-between gap-4 shadow-lg mb-8 animate-fadeIn">
                    <div class="text-center md:text-left">
                        <h2 class="text-xl font-bold text-white mb-2 flex items-center justify-center md:justify-start gap-2">
                            <i data-lucide="skull" class="text-white"></i> PROTOCOLO: ${guildInfo.season}
                        </h2>
                        <p class="text-zinc-400 max-w-xl text-sm leading-relaxed">
                            <span class="text-purple-400 font-bold">NERO:</span> Bloqueia o gelo inimigo. <br/>
                            <span class="text-purple-400 font-bold">LILA:</span> Tiros de Rifle causam lentid√£o.
                        </p>
                    </div>
                    <div class="hidden md:block opacity-20">
                        <i data-lucide="target" class="w-24 h-24 text-white"></i>
                    </div>
                </div>
            `;

            let cardsHtml = '<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 animate-fadeIn">';
            squadRoles.forEach(role => {
                cardsHtml += `
                    <div class="bg-zinc-950 border-t-4 ${role.color} p-5 rounded-xl shadow-md hover:bg-zinc-900 transition-all flex flex-col h-full group relative overflow-hidden">
                        <div class="flex justify-between items-start mb-3 relative z-10">
                            <div class="p-2 bg-black rounded border border-zinc-800 text-white">
                                <i data-lucide="${role.icon}" class="${role.iconColor}"></i>
                            </div>
                            <span class="text-[9px] font-bold uppercase tracking-widest text-zinc-500 bg-black px-2 py-1 rounded border border-zinc-800">${role.meta}</span>
                        </div>
                        <h4 class="text-lg font-bold text-white mb-1 relative z-10">${role.role}</h4>
                        <p class="text-xs text-zinc-400 mb-4 h-8 relative z-10">${role.desc}</p>
                        
                        <div class="bg-zinc-900 p-2.5 rounded border border-zinc-800 mb-2 relative z-10">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-[10px] text-zinc-500 uppercase">Ativa:</span>
                                <span class="text-xs font-bold text-purple-400">${role.active}</span>
                            </div>
                            <div class="mt-1.5 pt-1.5 border-t border-zinc-800">
                                <span class="text-[9px] text-zinc-500 uppercase block mb-1">Passivas:</span>
                                <div class="flex flex-wrap gap-1">
                                    ${role.passives.map(p => `<span class="text-[9px] text-zinc-300 bg-black px-1.5 py-0.5 rounded border border-zinc-800">${p}</span>`).join('')}
                                </div>
                            </div>
                        </div>

                        <div class="bg-zinc-900 p-2.5 rounded border border-zinc-800 flex-grow relative z-10">
                            <div class="flex items-center gap-1 mb-2 border-b border-zinc-800 pb-1">
                                <i data-lucide="crosshair" class="w-3 h-3 text-white"></i>
                                <span class="text-[10px] text-zinc-500 uppercase font-bold">Loadout</span>
                            </div>
                            <div class="space-y-1.5">
                                <div class="flex justify-between text-xs"><span class="text-zinc-500">Pri:</span> <span class="text-white font-bold">${role.pri}</span></div>
                                <div class="flex justify-between text-xs"><span class="text-zinc-500">Sec:</span> <span class="text-white font-bold">${role.sec}</span></div>
                                <div class="flex justify-between text-xs"><span class="text-zinc-500">Side:</span> <span class="text-zinc-400">${role.side}</span></div>
                            </div>
                            <div class="mt-2 text-[9px] text-purple-400 italic border-t border-zinc-800 pt-1">"${role.obs}"</div>
                        </div>

                        <div class="mt-2 flex items-center justify-between text-[10px] text-zinc-500 bg-black p-2 rounded border border-zinc-800/50 relative z-10">
                            <div class="flex items-center gap-1"><i data-lucide="mouse-pointer-2" class="w-3 h-3"></i> <span class="text-white font-bold">${role.pet}</span></div>
                            <span class="text-zinc-600 italic hidden sm:block">${role.petDesc}</span>
                        </div>
                        
                        <div class="absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity pointer-events-none">
                            <i data-lucide="${role.icon}" class="w-24 h-24"></i>
                        </div>
                    </div>
                `;
            });
            cardsHtml += '</div>';

            container.innerHTML = banner + cardsHtml;
        }

        function renderMap(container) {
            const map = mapsData[currentMapKey];
            let imageHtml = '';
            if (map.image) {
                imageHtml = `
                    <div class="rounded-2xl border border-zinc-800 overflow-hidden shadow-lg mb-6 group relative cursor-pointer animate-fadeIn" onclick="openModal('${map.image}')">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent z-10 pointer-events-none"></div>
                        <img src="${map.image}" alt="${map.title}" class="w-full h-48 md:h-80 object-cover opacity-80 group-hover:opacity-100 transition-all duration-700 hover:scale-105">
                        <div class="absolute bottom-4 left-4 z-20">
                            <h3 class="text-2xl font-black text-white uppercase tracking-widest drop-shadow-lg">${map.title}</h3>
                            <span class="text-[10px] text-purple-400 font-bold bg-black/80 px-2 py-1 rounded backdrop-blur-sm border border-purple-500/30 flex items-center gap-1">
                                <i data-lucide="pen-tool" class="w-3 h-3"></i> DESENHAR ROTAS
                            </span>
                        </div>
                    </div>
                `;
            }

            let tabsHtml = '<div class="flex flex-col md:flex-row justify-between items-end gap-4 border-b border-zinc-800 pb-6 mb-6">';
            tabsHtml += `
                <div>
                    <h2 class="text-3xl font-black text-white uppercase flex items-center gap-3">${map.title}</h2>
                    <p class="text-zinc-500 text-sm mt-1">An√°lise T√°tica e Zonas de Risco</p>
                </div>
                <div class="flex gap-2 overflow-x-auto pb-2 md:pb-0 scrollbar-hide w-full md:w-auto">
            `;
            
            Object.keys(mapsData).forEach(key => {
                const isActive = key === currentMapKey;
                const classes = isActive 
                    ? 'bg-white text-black border-white' 
                    : 'bg-black text-zinc-500 border-zinc-800 hover:text-white';
                tabsHtml += `<button onclick="switchMap('${key}')" class="px-4 py-1.5 rounded text-xs font-bold uppercase tracking-wider border transition-all whitespace-nowrap ${classes}">${mapsData[key].title}</button>`;
            });
            tabsHtml += '</div></div>';

            let gridHtml = '<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 animate-fadeIn">';
            map.locations.forEach(loc => {
                const isSelected = selectedLocationId === loc.id;
                const borderClass = isSelected ? 'border-white bg-zinc-800' : 'border-zinc-800 bg-zinc-900';
                
                let riskClass = 'bg-green-900/20 text-green-500';
                if(loc.risk === 'Extremo') riskClass = 'bg-red-900/20 text-red-500';
                if(loc.risk === 'Alto') riskClass = 'bg-orange-900/20 text-orange-500';

                gridHtml += `
                    <div onclick="toggleLocation('${loc.id}')" class="${borderClass} p-5 rounded-lg cursor-pointer hover:border-zinc-600 transition-all border">
                        <div class="flex justify-between mb-2">
                            <h3 class="font-bold text-white">${loc.name}</h3>
                            <span class="text-[10px] px-2 py-0.5 rounded font-bold uppercase ${riskClass}">${loc.risk}</span>
                        </div>
                        <div class="text-xs text-zinc-500 uppercase tracking-wider mb-4 flex gap-2">
                            <span>Loot: <span class="text-white">${loc.loot}</span></span>
                            ${loc.sniper ? '<span class="text-purple-500 flex items-center gap-1 ml-auto"><i data-lucide="crosshair" class="w-3 h-3"></i> SNIPER</span>' : ''}
                        </div>
                        ${isSelected ? `
                            <div class="animate-fadeIn">
                                <p class="text-sm text-zinc-300 mb-3 pl-2 border-l-2 border-white">${loc.desc}</p>
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            gridHtml += '</div>';

            container.innerHTML = imageHtml + tabsHtml + gridHtml;
        }

        function renderTraining(container) {
            let html = `
                <div class="space-y-8 animate-fadeIn">
                    <div>
                        <h2 class="text-2xl font-bold text-white flex items-center gap-3 uppercase mb-6">
                            <i data-lucide="calendar" class="text-white"></i> Cronograma Semanal
                        </h2>
                        <div class="grid gap-4">
            `;

            weeklySchedule.forEach(item => {
                const borderClass = item.highlight ? 'border-yellow-500 bg-zinc-900/50' : 'border-purple-600 bg-zinc-950';
                const titleClass = item.highlight ? 'text-yellow-500' : 'text-white';
                
                html += `
                    <div class="${borderClass} border-l-4 p-5 rounded-r-lg flex flex-col md:flex-row md:items-center justify-between gap-4 shadow-md hover:bg-zinc-900 transition-all">
                        <div class="md:w-1/3">
                            <span class="text-[10px] font-bold text-zinc-500 uppercase tracking-widest block mb-1">${item.period}</span>
                            <h3 class="text-lg font-bold ${titleClass} leading-tight">${item.title}</h3>
                        </div>
                        <p class="text-xs text-zinc-400 md:w-2/3 leading-relaxed border-t md:border-t-0 md:border-l border-zinc-800 pt-3 md:pt-0 md:pl-4">
                            ${item.desc}
                        </p>
                    </div>
                `;
            });

            html += `</div></div><div>
                        <h2 class="text-2xl font-bold text-white flex items-center gap-3 uppercase mb-6 mt-4">
                            <i data-lucide="lightbulb" class="text-purple-500"></i> Dicas T√°ticas de Elite
                        </h2>
                        <div class="grid md:grid-cols-2 gap-4">`;

            tacticalTips.forEach(tip => {
                html += `
                    <div class="bg-zinc-900 border border-zinc-800 p-4 rounded-lg hover:border-purple-500/50 transition-all">
                        <h4 class="text-sm font-bold text-white mb-2 uppercase flex items-center gap-2">
                            <i data-lucide="check-circle" class="w-3 h-3 text-purple-500"></i> ${tip.title}
                        </h4>
                        <p class="text-xs text-zinc-400 leading-relaxed">${tip.desc}</p>
                    </div>
                `;
            });

            html += '</div></div></div>';
            container.innerHTML = html;
        }

        function renderSensi(container) {
            let btnClass = (mode) => currentSensiMode === mode 
                ? 'bg-purple-600 text-white border-purple-500' 
                : 'bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white';

            let html = `
                <div class="space-y-8 animate-fadeIn max-w-3xl mx-auto">
                    <div class="text-center">
                        <h2 class="text-2xl font-bold text-white flex items-center justify-center gap-3 uppercase mb-2">
                            <i data-lucide="sliders-horizontal" class="text-purple-500"></i> Laborat√≥rio de Sensibilidade
                        </h2>
                        <p class="text-zinc-500 text-sm">Gere, refine e domine sua configura√ß√£o.</p>
                    </div>

                    <!-- Configura√ß√µes do Gerador -->
                    <div class="bg-zinc-950/50 p-4 rounded-xl border border-zinc-800">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Estilo de Sensi -->
                            <div>
                                <h4 class="text-xs font-bold text-zinc-400 uppercase mb-3 text-center md:text-left">Estilo de Jogo</h4>
                                <div class="grid grid-cols-4 gap-2">
                                    <button id="btn-mode-random" onclick="setSensiMode('random')" class="${btnClass('random')} py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition-all border flex flex-col items-center justify-center gap-1 h-16">
                                        <i data-lucide="shuffle" class="w-4 h-4"></i> Random
                                    </button>
                                    <button id="btn-mode-high" onclick="setSensiMode('high')" class="${btnClass('high')} py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition-all border flex flex-col items-center justify-center gap-1 h-16">
                                        <i data-lucide="zap" class="w-4 h-4"></i> Rush
                                    </button>
                                    <button id="btn-mode-mid" onclick="setSensiMode('mid')" class="${btnClass('mid')} py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition-all border flex flex-col items-center justify-center gap-1 h-16">
                                        <i data-lucide="activity" class="w-4 h-4"></i> H√≠brido
                                    </button>
                                    <button id="btn-mode-low" onclick="setSensiMode('low')" class="${btnClass('low')} py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition-all border flex flex-col items-center justify-center gap-1 h-16">
                                        <i data-lucide="target" class="w-4 h-4"></i> Preciso
                                    </button>
                                </div>
                            </div>

                            <!-- Tamanho do Bot√£o -->
                            <div>
                                <h4 class="text-xs font-bold text-zinc-400 uppercase mb-3 text-center md:text-left">Tamanho do Bot√£o de Atirar</h4>
                                <div class="grid grid-cols-4 gap-2">
                                    <button id="btn-fire-random" onclick="setBtnMode('random')" class="bg-blue-600 text-white border-blue-500 py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition-all border flex flex-col items-center justify-center gap-1 h-16">
                                        <i data-lucide="help-circle" class="w-4 h-4"></i> Random
                                    </button>
                                    <button id="btn-fire-small" onclick="setBtnMode('small')" class="bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition-all border flex flex-col items-center justify-center gap-1 h-16">
                                        <i data-lucide="mouse-pointer-2" class="w-3 h-3"></i> Peq (30-45)
                                    </button>
                                    <button id="btn-fire-medium" onclick="setBtnMode('medium')" class="bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition-all border flex flex-col items-center justify-center gap-1 h-16">
                                        <i data-lucide="mouse-pointer-2" class="w-4 h-4"></i> M√©d (46-60)
                                    </button>
                                    <button id="btn-fire-large" onclick="setBtnMode('large')" class="bg-zinc-900 text-zinc-400 border-zinc-800 hover:bg-zinc-800 hover:text-white py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition-all border flex flex-col items-center justify-center gap-1 h-16">
                                        <i data-lucide="mouse-pointer-2" class="w-5 h-5"></i> Grd (61+)
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 flex justify-center">
                            <button onclick="generateNewSensi()" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white font-bold py-3 px-12 rounded-xl shadow-lg shadow-purple-900/20 transform transition hover:scale-105 active:scale-95 flex items-center gap-2 text-sm uppercase tracking-widest w-full md:w-auto justify-center">
                                <i data-lucide="cpu" class="w-5 h-5"></i> Gerar Configura√ß√£o
                            </button>
                        </div>
                    </div>

                    <!-- Perfil Detectado -->
                    <div id="sensi-profile-name" class="text-center text-sm font-bold text-white uppercase tracking-widest mb-2 animate-pulse bg-zinc-900/50 p-2 rounded border border-zinc-800">
                        ---
                    </div>

                    <!-- Grid de Sensi com Microajuste -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="sensi-grid">
                        <!-- Sensi cards injected here -->
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-zinc-950 border border-zinc-800 p-5 rounded-xl flex flex-col justify-between items-center gap-2">
                            <div class="text-center">
                                <h3 class="text-white font-bold text-sm uppercase">DPI Otimizada</h3>
                                <p class="text-zinc-500 text-[10px] uppercase tracking-wider" id="dpi-range-desc">---</p>
                            </div>
                            <div class="text-3xl font-black text-white tracking-widest bg-black px-6 py-2 rounded border border-zinc-800 w-full text-center" id="dpi-display">---</div>
                        </div>

                        <div class="bg-zinc-950 border border-zinc-800 p-5 rounded-xl flex flex-col justify-between items-center gap-2">
                            <div class="text-center">
                                <h3 class="text-white font-bold text-sm uppercase">Bot√£o de Atirar</h3>
                                <p class="text-zinc-500 text-[10px] uppercase tracking-wider">Tamanho Ideal</p>
                            </div>
                            <div class="text-3xl font-black text-white tracking-widest bg-black px-6 py-2 rounded border border-zinc-800 w-full text-center" id="btn-size-display">--%</div>
                        </div>
                    </div>

                    <!-- HUD SECTION -->
                    <div class="mt-12 border-t border-zinc-800 pt-8">
                        <h2 class="text-xl font-bold text-white flex items-center justify-center gap-2 uppercase mb-6">
                            <i data-lucide="layout-template" class="text-purple-500"></i> HUDs Profissionais
                        </h2>
                        
                        <div class="flex justify-center gap-3 mb-6">
                            <button onclick="switchHudTab('2')" id="hud-tab-2" class="bg-zinc-900 text-zinc-500 border border-zinc-800 px-4 py-2 rounded-lg text-xs font-bold uppercase transition-all hover:text-white">2 Dedos</button>
                            <button onclick="switchHudTab('3')" id="hud-tab-3" class="bg-zinc-900 text-zinc-500 border border-zinc-800 px-4 py-2 rounded-lg text-xs font-bold uppercase transition-all hover:text-white">3 Dedos</button>
                            <button onclick="switchHudTab('4')" id="hud-tab-4" class="bg-zinc-900 text-zinc-500 border border-zinc-800 px-4 py-2 rounded-lg text-xs font-bold uppercase transition-all hover:text-white">4 Dedos</button>
                        </div>

                        <div id="hud-list" class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <!-- HUD list injected here -->
                        </div>
                    </div>

                    <!-- DNS SECTION (NEW) -->
                    <div class="mt-12 border-t border-zinc-800 pt-8 pb-8">
                        <h2 class="text-xl font-bold text-white flex items-center justify-center gap-2 uppercase mb-6">
                            <i data-lucide="wifi" class="text-blue-500"></i> DNS Estabilizador (Anti-Lag)
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            `;
            
            // Loop DNS List - Reassigning to 'let html' variable
            dnsList.forEach(dns => {
                html += `
                    <div class="bg-zinc-950 border border-zinc-800 p-4 rounded-xl hover:border-zinc-600 transition-all">
                        <h3 class="text-sm font-bold ${dns.color} mb-3 uppercase flex items-center gap-2">
                            <i data-lucide="server" class="w-4 h-4"></i> ${dns.name}
                        </h3>
                        <div class="space-y-2">
                            <div class="flex justify-between items-center bg-black p-2 rounded border border-zinc-800">
                                <span class="text-zinc-400 text-xs">Prim√°rio</span>
                                <div class="flex items-center gap-2">
                                    <span class="text-white font-mono font-bold text-sm">${dns.p}</span>
                                    <button onclick="copyToClipboard('${dns.p}')" class="text-zinc-500 hover:text-white"><i data-lucide="copy" class="w-3.5 h-3.5"></i></button>
                                </div>
                            </div>
                            <div class="flex justify-between items-center bg-black p-2 rounded border border-zinc-800">
                                <span class="text-zinc-400 text-xs">Secund√°rio</span>
                                <div class="flex items-center gap-2">
                                    <span class="text-white font-mono font-bold text-sm">${dns.s}</span>
                                    <button onclick="copyToClipboard('${dns.s}')" class="text-zinc-500 hover:text-white"><i data-lucide="copy" class="w-3.5 h-3.5"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `   </div>
                    </div>
                </div>`;
            
            container.innerHTML = html;
            
            lucide.createIcons();
            updateSensiUI();
            
            // Generate New Sensi
            generateNewSensi(); 
            switchHudTab('3');
        }

        function generateNewSensi() {
            // Defini√ß√£o dos Perfis (Ranges ajustados)
            const profilesData = {
                high: {
                    name: 'PERFIL: ALTA (INSTAPLAYER)',
                    desc: 'Movimenta√ß√£o R√°pida & Gelos Insanos',
                    ranges: {
                        geral: [185, 200],
                        redDot: [180, 200],
                        x2: [185, 200],
                        x4: [180, 200],
                        awm: [130, 180],
                        dpi: [900, 960], // User asked max 960
                        btn: [35, 50]
                    }
                },
                mid: {
                    name: 'PERFIL: M√âDIA (BALANCEADA)',
                    desc: 'Equil√≠brio entre Rush e Precis√£o',
                    ranges: {
                        geral: [150, 184],
                        redDot: [145, 179],
                        x2: [150, 180],
                        x4: [150, 180],
                        awm: [100, 140],
                        dpi: [650, 800],
                        btn: [45, 60]
                    }
                },
                low: {
                    name: 'PERFIL: BAIXA (PRECIS√ÉO)',
                    desc: 'Estabilidade Total (Mira Grudada)',
                    ranges: {
                        geral: [100, 149],
                        redDot: [90, 140],
                        x2: [100, 140],
                        x4: [100, 140],
                        awm: [50, 90],
                        dpi: [500, 649],
                        btn: [55, 80]
                    }
                }
            };

            // Determina qual perfil usar
            let selectedProfileKey = currentSensiMode;
            if (currentSensiMode === 'random') {
                const keys = ['high', 'mid', 'low'];
                selectedProfileKey = keys[Math.floor(Math.random() * keys.length)];
            }

            const profile = profilesData[selectedProfileKey];
            const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

            // Gera valores base
            currentSensiValues = {
                geral: rand(...profile.ranges.geral),
                redDot: rand(...profile.ranges.redDot),
                x2: rand(...profile.ranges.x2),
                x4: rand(...profile.ranges.x4),
                awm: rand(...profile.ranges.awm)
            };

            const dpi = rand(...profile.ranges.dpi);
            
            // Bot√£o de atirar baseado na sele√ß√£o
            let btnSize;
            if (currentBtnMode === 'small') btnSize = rand(30, 45);
            else if (currentBtnMode === 'medium') btnSize = rand(46, 60);
            else if (currentBtnMode === 'large') btnSize = rand(61, 85);
            else btnSize = rand(35, 75);

            // Update UI
            const grid = document.getElementById('sensi-grid');
            if(grid) {
                // Nome do Perfil
                const profileNameDiv = document.getElementById('sensi-profile-name');
                if(profileNameDiv) {
                    profileNameDiv.innerHTML = `
                        <span class="text-purple-400">${profile.name}</span>
                        <span class="text-zinc-500 mx-2">|</span>
                        <span class="text-zinc-400 font-normal text-[10px]">${profile.desc}</span>
                    `;
                }

                // Cards de Sensi com Microajuste
                const configItems = [
                    { id: 'geral', label: 'Geral', icon: 'move' },
                    { id: 'redDot', label: 'Ponto Vermelho', icon: 'dot' },
                    { id: 'x2', label: 'Mira 2x', icon: 'zoom-in' },
                    { id: 'x4', label: 'Mira 4x', icon: 'crosshair' },
                    { id: 'awm', label: 'Mira AWM', icon: 'target' }
                ];

                grid.innerHTML = configItems.map(item => `
                    <div class="bg-zinc-900 border border-zinc-800 p-4 rounded-lg flex flex-col gap-3 hover:border-purple-500/50 transition-colors">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2 text-zinc-400">
                                <i data-lucide="${item.icon}" class="w-4 h-4"></i>
                                <span class="text-xs uppercase font-bold tracking-wider">${item.label}</span>
                            </div>
                            <span class="text-3xl font-black text-white" id="val-${item.id}">${currentSensiValues[item.id]}</span>
                        </div>
                        
                        <div class="w-full bg-zinc-800 h-1.5 rounded-full overflow-hidden">
                            <div id="bar-${item.id}" class="bg-purple-600 h-full transition-all duration-300" style="width: ${(currentSensiValues[item.id] / 200) * 100}%"></div>
                        </div>

                        <div class="flex justify-between gap-2 mt-1">
                            <button onclick="adjustSensi('${item.id}', -1)" class="flex-1 bg-black border border-zinc-700 hover:bg-zinc-800 text-zinc-400 rounded py-1 flex justify-center items-center">
                                <i data-lucide="minus" class="w-3 h-3"></i>
                            </button>
                            <button onclick="adjustSensi('${item.id}', 1)" class="flex-1 bg-black border border-zinc-700 hover:bg-zinc-800 text-zinc-400 rounded py-1 flex justify-center items-center">
                                <i data-lucide="plus" class="w-3 h-3"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
                
                // DPI e Bot√£o
                document.getElementById('dpi-display').innerText = dpi;
                document.getElementById('btn-size-display').innerText = btnSize + '%';
                
                // Descri√ß√£o do range da DPI
                const dpiRangeDesc = document.getElementById('dpi-range-desc');
                if(dpiRangeDesc) dpiRangeDesc.innerText = `Faixa: ${profile.ranges.dpi[0]} - ${profile.ranges.dpi[1]}`;

                lucide.createIcons();
            }
        }

        function render4x4(container) {
            const html = `
                <div class="space-y-8 animate-fadeIn">
                    <div class="text-center md:text-left">
                        <h2 class="text-2xl font-bold text-white flex items-center justify-center md:justify-start gap-3 uppercase mb-2">
                            <i data-lucide="swords" class="text-purple-500"></i> Dicas de 4x4 & Apostado
                        </h2>
                        <p class="text-zinc-500 text-sm">Domine o CS e os X-Treinos valendo dinheiro.</p>
                    </div>

                    <div class="bg-zinc-950 border border-purple-600/30 p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                            <i data-lucide="dollar-sign" class="text-green-500"></i> Dicas de Apostado (Money Matches)
                        </h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-purple-400 mb-2 uppercase">1. An√°lise Imediata</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    No primeiro round, descubra o estilo do inimigo: Ele √© rusher? Ele segura dedo? Identifique e puna.
                                </p>
                            </div>
                            <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-purple-400 mb-2 uppercase">2. Adapta√ß√£o Camale√£o</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    Se voc√™ est√° perdendo, MUDE seu jogo. Se ele campera, campere tamb√©m. Jogue pelo dinheiro, n√£o pelo ego.
                                </p>
                            </div>
                            <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-purple-400 mb-2 uppercase">3. Hor√°rio de Ouro</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    Evite a madrugada nos finais de semana. Jogue em hor√°rios mais casuais para evitar os tryhards.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-zinc-950 border border-green-600/30 p-6 rounded-xl shadow-lg mt-6">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                            <i data-lucide="gem" class="text-green-400"></i> Segredos do High Stakes (Valor Alto)
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-green-400 mb-2 uppercase">A Regra do X2</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    Abandone o X4. O modo <strong>2v2 (X2)</strong> √© o rei do lucro. Menos caos que 4v4 e menos aleat√≥rio que X1. Jogue colado com seu duo: um isca, o outro mata.
                                </p>
                            </div>
                            <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-green-400 mb-2 uppercase">Performance > Beleza</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    "Feio √© perder dinheiro". N√£o tente clipar. Use skins leves (sem efeitos) para reduzir input lag. Se o inimigo errar o hud, puna sem d√≥. 7 a 0 √© belo.
                                </p>
                            </div>
                            <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-green-400 mb-2 uppercase">T√©cnica do Bait</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    O "Fake Rush": Finja que vai invadir o gelo, pare no meio do caminho e volte. O inimigo vai pular no aberto achando que voc√™ foi de boc√£o. A√≠ √© s√≥ capa.
                                </p>
                            </div>
                            <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-green-400 mb-2 uppercase">Bug de Pixel</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    Use o "Macetinho": Comece a atirar antes de abrir a mira totalmente ou use o pixel da direita (Camera). Quem atira primeiro no aberto geralmente perde. Espere ele pular.
                                </p>
                            </div>
                            <!-- Dicas Novas do V√≠deo do AlanXis -->
                             <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-green-400 mb-2 uppercase">Input Lag Zero</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    Use skins leves (como a do Mandela/Padr√£o) e feche tudo no PC/Celular. Otimiza√ß√£o √© vantagem real no 1v1.
                                </p>
                            </div>
                             <div class="bg-zinc-900/50 p-4 rounded-lg border border-zinc-800">
                                <h4 class="text-sm font-bold text-green-400 mb-2 uppercase">Bait Reverso (Emu)</h4>
                                <p class="text-xs text-zinc-400 leading-relaxed">
                                    Pule, d√™ soco no ar e segure o shift para "voltar" pro lugar. Engana quem espera o pulo completo.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-zinc-950 border border-blue-600/30 p-6 rounded-xl shadow-lg mt-6">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                            <i data-lucide="crosshair" class="text-blue-500"></i> T√°ticas de 4x4 (CS / Solo vs Squad)
                        </h3>
                        <div class="space-y-3">
                            <div class="flex gap-4 items-start bg-zinc-900/50 p-3 rounded border border-zinc-800">
                                <div class="bg-blue-900/20 p-2 rounded text-blue-400"><i data-lucide="user-minus" class="w-4 h-4"></i></div>
                                <div>
                                    <h4 class="text-sm font-bold text-white">Bait do Salvamento</h4>
                                    <p class="text-xs text-zinc-400">Derrubou um? N√£o finalize imediatamente se tiver cover. Espere o amigo vir salvar para pegar a segunda kill f√°cil.</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start bg-zinc-900/50 p-3 rounded border border-zinc-800">
                                <div class="bg-blue-900/20 p-2 rounded text-blue-400"><i data-lucide="brain-circuit" class="w-4 h-4"></i></div>
                                <div>
                                    <h4 class="text-sm font-bold text-white">Mentalidade 1v4</h4>
                                    <p class="text-xs text-zinc-400">Mantenha a calma. Isole os inimigos para criar quatro situa√ß√µes de 1v1. Nunca troque tiro com dois ao mesmo tempo.</p>
                                </div>
                            </div>
                            <div class="flex gap-4 items-start bg-zinc-900/50 p-3 rounded border border-zinc-800">
                                <div class="bg-blue-900/20 p-2 rounded text-blue-400"><i data-lucide="move" class="w-4 h-4"></i></div>
                                <div>
                                    <h4 class="text-sm font-bold text-white">Falso Recuo</h4>
                                    <p class="text-xs text-zinc-400">Finja que vai fugir para fazer o inimigo sair do cover e correr no aberto atr√°s de voc√™. Vire e puna o erro dele.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        // Inicializa√ß√£o e Switch Tab padr√£o
        document.addEventListener('DOMContentLoaded', () => {
            switchTab('squad'); 
        });

    </script>
</body>
</html>
